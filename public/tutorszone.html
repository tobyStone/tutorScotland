<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Tutor Zone – Tutors Alliance Scotland</title>

    <link rel="icon" href="/images/bannerShield2.png" type="image/png" />
    <link rel="stylesheet" href="/style.css" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <script src="/responsive-helper.js" defer></script>

    <script>
        /* Guard ‑ redirect non‑tutors to login */
        (async () => {
            try {
                const r = await fetch('/api/protected?role=tutor');
                if (!r.ok) throw new Error();
            } catch {
                location.href = '/login.html?role=tutor';
            }
        })();
    </script>
</head>



<body class="tutorzone-page">
    <header>
        <h1>Tutors Alliance Scotland</h1>
        <div class="header-links">
            <a class="banner-login-link login-box" href="/">Home</a>
            <a class="banner-login-link login-box" href="/login.html?role=admin">Login</a>
        </div>
    </header>

    <nav class="main-nav">
        <ul>
            <li><a href="/about-us.html">About Us</a></li>
            <li><a href="/tutorMembership.html">Tutor Membership</a></li>
            <li><a href="/parents.html">Enter Parent Zone</a></li>
            <li><a href="/contact.html">Contact Us</a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/tutorDirectory.html">Tutor Directory</a></li>
        </ul>
    </nav>

    <div class="rolling-banner">
        <div class="rolling-content" id="tutorBanner"></div>
    </div>

    <main>
        <div class="tutorzone-container">
            <section id="resources" class="tutorzone-section">
                <h2>Resources</h2>
                <p>Find guides, tutorials, and other materials to help you excel as a tutor.</p>
                <ul>
                    <li><a href="#">Tutoring Best Practices</a></li>
                    <li><a href="#">Professional Development Guides</a></li>
                    <li><a href="#">Resource Library</a></li>
                </ul>
            </section>

            <section id="events" class="tutorzone-section">
                <h2>Events</h2>
                <p>Keep up‑to‑date with upcoming webinars and training sessions.</p>
                <div class="calendar">[Calendar Widget Placeholder]</div>
            </section>

            <section id="facebook" class="tutorzone-section">
                <h2>Connect on Facebook</h2>
                <p class="facebook-link">
                    <a target="_blank" href="https://www.facebook.com/TutorsAllianceScotland">
                        Visit our Facebook Page
                    </a>
                </p>
            </section>

            <section id="tutorHighlight" class="tutor-highlight-banner">
                <h2>Tutor Highlight</h2>
                <p>This month's featured tutor: <strong>Jane Doe</strong></p>
            </section>
        </div>

        <!-- Clear separator before dynamic sections -->
        <div class="dynamic-sections-separator"></div>

        <!-- Dynamic sections will be added here -->
        <section id="dynamicSections"></section>
    </main>

    <script type="module">
        fetch('/api/tutors?format=json')
            .then(r => r.json())
            .then(list => {
                tutorBanner.textContent =
                    list.map(t => `${t.name} (${t.subjects.join(', ')})`).join(' | ');
            })
            .catch(console.error);
    </script>
    <script>
        // Fade-in animation for sections
        const fadeEls = document.querySelectorAll('.fade-in-on-scroll');

        // Set initial styles
        fadeEls.forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';
        });

        // Create the Intersection Observer
        const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // Fade it in
                    entry.target.style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out';
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';

                    // Once triggered, stop observing so it doesn't re-animate if user scrolls away
                    obs.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 }); // threshold=0.1 => trigger at 10% visibility

        // Observe each fadeEl
        fadeEls.forEach(el => observer.observe(el));
    </script>

    <script type="module">
        const page = location.pathname.replace(/^\//, '').split('.')[0] || 'index';

        fetch(`/api/sections?page=${page}`)
            .then(r => r.json())
            .then(list => {
                if (list && list.length > 0) {
                    // Only show the dynamic sections container if there are sections to display
                    const host = document.getElementById('dynamicSections');

                    // Clear any existing content
                    host.innerHTML = '';

                    // Add each section with proper spacing and styling
                    list.forEach((s, index) => {
                        host.insertAdjacentHTML('beforeend', `
                          <article class="dyn-block fade-in-on-scroll" style="transition-delay: ${index * 0.1}s">
                            ${s.image ? `<img src="${s.image}" alt="${s.heading}" loading="lazy">` : ''}
                            <h2>${s.heading}</h2>
                            <div class="dyn-content">${s.text}</div>
                          </article>`);
                    });

                    // Make sure the dynamic sections container is visible
                    host.style.display = 'block';

                    // Ensure the separator is visible
                    document.querySelector('.dynamic-sections-separator').style.display = 'block';

                    // Force layout recalculation to ensure proper positioning
                    document.body.offsetHeight;

                    // Apply observer to newly created elements
                    document
                        .querySelectorAll('.dyn-block.fade-in-on-scroll')
                        .forEach(el => observer.observe(el));
                } else {
                    // If no dynamic sections, hide the container and separator
                    const host = document.getElementById('dynamicSections');
                    host.style.display = 'none';
                    document.querySelector('.dynamic-sections-separator').style.display = 'none';
                }
            })
            .catch(error => {
                console.error('Error loading dynamic sections:', error);
                // Hide the container and separator on error
                document.getElementById('dynamicSections').style.display = 'none';
                document.querySelector('.dynamic-sections-separator').style.display = 'none';
            });
    </script>


</body>
</html>
